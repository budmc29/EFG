# This is intended to provide a mechanism by which relatively expensive data
# updates can be decoupled from deployment time and run independently.
#
# This will execute within an ActiveRecord transaction and is instance_eval-ed.
# Just write normal ruby code and refer to any model objects that you require.
# Since a data migration is intended to be run in production, when the schema
# and model are known quantities, it should be fine to reference model classes
# directly, even though in the future they may be refactored or deleted
# entirely.

reassignments = [
  {ref: '2C7GFK3+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '2C8QUXD+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '2CCZ7UA+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '2ZMVCUK+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '392ZJN6+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: '39QQ3W4+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '3F3YDTJ+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '3HK4LFR+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '3TTAX26+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '3YYRWT6+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: '49DNVUB+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '4EMFK7M+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: '57PM229+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '5B43BZP+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '5FT9WHR+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: '5GJZFTE+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '5H4LMNN+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '5RR8CGZ+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: '5UNKG56+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '5VGE37V+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '5Y63JRC+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '5ZBFQUV+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '64J25JN+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '6AP5PWQ+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '6BLG26Q+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '6PKKWH3+01', old_limit: 'SFLG Transfer 2012/13',    new_limit: 'EFG Base FY 2012/13'},
  {ref: '6ZDSS3V+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '749RRRJ+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: '7KGV5FX+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '7SJVMDL+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '7UPK7LL+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '7XURS9T+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '82VRUPM+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '83969FT+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '87644F8+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: '8EGERCS+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '8LUD9WW+01', old_limit: 'Transfer 2008/09',         new_limit: 'Base 2008/09'},
  {ref: '8V6XKDT+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '8YH4BAC+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '92Y646G+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '93JFF5A+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: '98KLFT5+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '9B7SPB4+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: '9MZ8UXM+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: '9S5866Z+01', old_limit: 'Transfer 2008/09',         new_limit: 'Base 2008/09'},
  {ref: 'A2LS6YX+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'A2TNW2R+01', old_limit: 'Transfer 2008/09',         new_limit: 'Base 2008/09'},
  {ref: 'A4LRX6T+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'AAMEFN8+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'AE5DK26+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'AFEL5VD+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'ASSLTTK+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'BAQSSRR+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'BGX6TN6+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'BQ8HSUY+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'BRDE2AN+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'BSDPX8X+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'C23KKM8+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'CGDQK36+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'CHQ236P+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'CSLNW2A+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'CYTTZP9+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'DADD9MZ+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'DHGD48R+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'DKPMLZZ+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'DMRY73X+01', old_limit: 'Transfer 2008/09',         new_limit: 'Base 2008/09'},
  {ref: 'DRCRDYC+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'DSGL6B2+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'E4B38ME+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'E92MLPU+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'ECZ54J5+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'EDZMKMN+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'FCGXPXD+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'FDDGB38+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'FLFHQ2V+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'FLU8C57+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'G2Q93FT+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'GJHSDGL+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'GJTS9WC+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'GKCRFMY+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'GUXAG5T+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'GVV3KYX+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'H46PQKZ+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'HCG5TJE+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'HKY65VD+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'HLLWB5Y+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'HPYNLUB+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'HQ62F2H+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'HZ2THZP+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'J5ABFHM+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'J8ZPL28+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'JJ8AR9U+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'JKRVMH8+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'JU4BUW5+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'JZ6FHT2+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'K8YTY2P+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'K9GVLHK+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'KACQQAG+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'KFMM5YR+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'KVQ7QS9+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'KVWY54U+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'L6CWZX5+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'LM4L9VE+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'LNY9E9H+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'LWXQWJV+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'M8N66YZ+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'MJDSSEX+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'MMR5PWB+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'N3MD7BP+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'NGJVBJU+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'NQ77VNW+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'PFHB7XF+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'PK22622+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'PWUTD7F+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'PYZ9GDJ+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'Q8KYDRD+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'QBHZNF8+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'QC3WB7G+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'QTWP9TM+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'QVS8S6W+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'R7UG4UZ+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'RCVYDZY+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'RN5LYV3+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'RVF256Q+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'SJSC96N+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'SLHNNKV+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'SMGXYAF+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'SRG87NW+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'SYW4YK4+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'T6SV5RR+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'T77SN7J+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'THYBNB3+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'TK4BS7K+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'TWCG3TL+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'UAEFDXC+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'UG26QCS+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'UL4PMM7+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'ULCLU8A+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'UPAE3EW+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'URGCUZM+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'UWDM9UA+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'VF6SDKU+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'VKB28Y2+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'VR2VA76+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'VRTBBBT+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'VTL48BH+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'VX9NDT9+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'W62VCJT+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'WMNXEDB+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'WMZ23AL+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'WSD63NC+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'WT3WTL5+01', old_limit: 'SFLG Transfer 2009/10',    new_limit: 'EFG Base FY 2009/10'},
  {ref: 'X8E6XB6+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'XGULRHF+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'XN6R483+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'YFE7U9C+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'YJGVFMY+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'YYWZCPL+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
  {ref: 'Z43RP63+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'Z6BWD9S+01', old_limit: 'SFLG Transfer FY 2013/14', new_limit: 'EFG Base FY 2013/14'},
  {ref: 'ZB7WU9Q+01', old_limit: 'SFLG Transfer FY 2010/11', new_limit: 'EFG Base FY 2010/11'},
  {ref: 'ZT5MB5R+01', old_limit: 'SFLG Transfer FY 2012/13', new_limit: 'EFG Base FY 2012/13'},
  {ref: 'ZWUHEJT+01', old_limit: 'SFLG Transfer FY 2011/12', new_limit: 'EFG Base FY 2011/12'},
]

reassignments.each do |reassignment|
  old_limit = reassignment[:old_limit]
  loan = Loan.find_by_reference(reassignment[:ref])
  if loan && loan.lending_limit.name == old_limit
    new_limit = loan.lender.lending_limits.find_by_name(reassignment[:new_limit])
    if new_limit
      loan.lending_limit = new_limit
      loan.save(validate: false)
    end
  end
end
